<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
>
<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" th:href="@{/img/favicon/favicon.jpg}" sizes="any"/>
  <title>Minhas | Finanças</title>
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" th:href="@{/lte3/plugins/fontawesome-free/css/all.min.css}">
  <!-- Theme style -->
  <link rel="stylesheet" th:href="@{/lte3/dist/css/adminlte.min.css}">

  <link rel="stylesheet" th:href="@{/lte3/plugins/toastr/toastr.min.css}">
</head>
<body class="hold-transition layout-top-nav">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
    <div class="container">
      <a th:href="@{/}" class="navbar-brand">
        <img th:src="@{/img/logo/logo.jpeg}" alt="Minhas Finanças Logo" class="brand-image elevation-3">
        <span class="brand-text font-weight-light">Minhas Finanças</span>
      </a>

      <button class="navbar-toggler order-1" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse order-3" id="navbarCollapse">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a th:href="@{/}" class="nav-link">Home</a>
          </li>
          <li class="nav-item">
            <a th:href="@{/contatos/novo}" class="nav-link">Contato</a>
          </li>
          <li class="nav-item dropdown">
            <a id="dropdownSubMenu1" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">Mais</a>
            <ul aria-labelledby="dropdownSubMenu1" class="dropdown-menu border-0 shadow">
              <li><a th:href="@{/usuarios/index}" class="dropdown-item">login </a></li>
              <li><a href="#" class="dropdown-item">Atendimento</a></li>
            </ul>
          </li>
        </ul>

        <!-- SEARCH FORM -->
        <form class="form-inline ml-0 ml-md-3">
          <div class="input-group input-group-sm">
            <input class="form-control form-control-navbar" type="search" placeholder="Pesquisa" aria-label="Search">
            <div class="input-group-append">
              <button class="btn btn-navbar" type="submit">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Right navbar links -->
      <div class="order-1 order-md-3 navbar-nav navbar-no-expand ml-auto">
        <p style="font-size: 20px">
          <span style="color:#B7E800; font-size: 16px">(16)</span>
          xxxxx-xxxx
        </p>
      </div>
    </div>
  </nav>
  <!-- /.navbar -->

  <!-- Content Wrapper. Contains page content -->
  <section layout:fragment="content-wrapper"></section>
  <!-- /.content-wrapper -->

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->

  <div th:replace="~{fragments/footer}"></div>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script th:src="@{/lte3/plugins/jquery/jquery.min.js}"></script>
<!-- Bootstrap 4 -->
<script th:src="@{/lte3/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{/lte3/dist/js/adminlte.min.js}"></script>

<script th:src="@{/lte3/plugins/toastr/toastr.min.js}"></script>


<script th:src="@{/paginas/js/config/constantes.js}"></script>
<script th:src="@{/js/clients/Fetch.js}"></script>
<script th:src="@{/paginas/js/config/configs.js}"></script>
<script th:src="@{/paginas/js/controllers/TelemetriaController.js}"></script>
<script th:src="@{/paginas/js/models/TelemetriaQuery.js}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/platform/1.3.5/platform.min.js"></script>
<script src= "https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div layout:fragment="script">
  <script type="text/javascript">
  var call = false;
    window.onload = function() {
       if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else{
        console.log("nao permitida localização");
          TelemetriaController.newAcesso(LOCATION_TELEMETRIA, null);
        }
    }
    function showPosition(position) {
        TelemetriaController.newAcesso(LOCATION_TELEMETRIA, position);
    }

    navigator.geolocation.getCurrentPosition(function(position) {
        TelemetriaController.newAcesso(LOCATION_TELEMETRIA, position);
    });

    setTimeout(preencherAutomatico, 10000); /* aguardando 10s para chamar a função */
    function preencherAutomatico() {
        TelemetriaController.newAcesso(LOCATION_TELEMETRIA, null);
    }


  </script>
</div>
</body>
</html>
